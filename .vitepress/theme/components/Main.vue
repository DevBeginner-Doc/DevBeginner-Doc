<template>
    <div class="main-container">
        <div class="card-main">
            <!-- å…¬å‘Šæ ‡é¢˜ -->
            <div class="card-title">
                <NoticeFull />
                <strong style="font-size: 1.3rem;">å…¬å‘Š</strong>
            </div>
            <!-- å…¬å‘Šå†…å®¹ -->
            <div style="padding-left: 15px;">
                <ul style="font-size: 1rem;">
                    <li>
                        æœ¬æ–‡æ¡£åŸºäº
                        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
                            CC BY-NC-SA 4.0(Creative Commons Attribution-ShareAlike 4.0)
                        </a>å¼€æºåè®®ï¼Œå†…å®¹è½¬è½½è¯·æ ‡æ˜å‡ºå¤„ã€‚
                    </li>
                    <li>
                        æ ¡å†…æˆæƒ QQ ç¾¤èŠï¼š
                        <a href="https://qm.qq.com/q/DZcC4JhnP4" target="_blank">
                            148518259(24çº§Cè¯­è¨€äº¤æµç¾¤)
                        </a>ã€
                        <a href="https://qm.qq.com/q/L58jzI8P6y" target="_blank">
                            980609672(è½»å¤§å¼€å‘äº¤æµç¾¤)
                        </a>ï¼Œç¾¤å†…åŒ…å«æ–‡æ¡£å®˜æ–¹æœºå™¨äººï¼Œå¯ä»¥å¸®ä½ å®æ—¶è·å–æ–‡æ¡£ä¿¡æ¯ã€‚å•Šï¼Œä¹Ÿå¯ä»¥å¸¦ä½ ç©ä¸€äº›å¥½ç©çš„ï¼ˆï¼‰
                    </li>
                    <li>
                        æ–‡æ¡£æŒç»­æ›´æ–°ä¸­ ğŸš€ï¼Œä»»ä½•æ–‡æ¡£å†…å®¹é—®é¢˜æ¬¢è¿åˆ°æ–‡æ¡£ä»“åº“æäº¤ issues æˆ– prï¼Œæˆ–è€…è¿›å…¥ä»¥ä¸Šæ ¡å†…æˆæƒç¾¤èŠè¿›è¡Œåé¦ˆï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å‘é€é‚®ä»¶è‡³ admin@frexlink.com å‘ŠçŸ¥æˆ‘ä»¬ã€‚
                    </li>
                    <li>
                        æƒ³è¦åŠ å…¥æ–‡æ¡£çš„ç¼–å†™ï¼Ÿå½“ç„¶ï¼ä½ å¯ä»¥é€šè¿‡å‘æ–‡æ¡£ä»“åº“æäº¤ pr æ¥å¸®åŠ©æˆ‘ä»¬å®Œå–„æ–‡æ¡£å†…å®¹ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æˆæƒç¾¤èŠå†…è”ç³»æˆ–@ç®¡ç†å‘˜æ¥ç”³è¯·ä»“åº“çš„ push æƒé™ã€‚æœŸå¾…å¤§å®¶çš„åˆ°æ¥ï¼
                    </li>
                    <li>
                        å¦‚æœä½ ç°åœ¨æˆ–è€…æœªæ¥æœ‰æ„å‘åœ¨ GitHub ä¸Šå¸®åŠ©å®Œå–„æ­¤æ–‡æ¡£çš„å†…å®¹ï¼Œæˆ‘ä»¬å¸Œæœ›ä½ åœ¨æ­¤ä¹‹å‰å·²ç»äº†è§£äº† vitepress æ–‡æ¡£çš„åŸºæœ¬ç»“æ„å’Œç¼–å†™æ­¥éª¤ä»¥åŠ Git å’Œ GitHub çš„ä½¿ç”¨åŸºç¡€ã€‚
                    </li>
                    <li>
                        âœ¨âœ¨ èµ„æºä¸‹è½½ç«™ç‚¹å·²ç»å®Œæˆåˆæ­¥éƒ¨ç½²ï¼Œä½ å¯ä»¥åœ¨å³ä¸Šè§’å¯¼èˆªä¸­è¿›å…¥ä¸‹è½½é¡µé¢ âœ¨âœ¨
                    </li>
                    <li>
                        CalDav è®¢é˜…å°†äºè¿‘æœŸå¼€æ”¾ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- æ ¡å†…æ¯”èµ›å¡ç‰‡ -->
    <div class="card">
        <div class="card-title">
            <ZZULIFull />
            <strong style="font-size: 1.1rem;">æ ¡å†…è®¡ç®—æœºèµ›äº‹</strong>
            <div style="position: absolute; right: 0; display: flex; gap: 5px; align-items: center;">
                <CalDavFull />
                <a class="alink" style="font-size: 0.89rem" href="" target="_blank">
                    CalDavè®¢é˜…
                </a>
            </div>
        </div>
        <div v-for="data in inEvents" class="card-item">
            <div class="contest-status" style="background-color: currentColor;"></div>
            <div class="contest-info">
                <a class="alink">{{ data.name }}</a>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <SummaryFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">æ¯”èµ›ç®€ä»‹ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.summary }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <InfoFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">æ¯”èµ›è¯´æ˜ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.notes }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <TimeFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">æ¯”èµ›æ—¶é—´ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.startAt }}</span>
                </div>
            </div>
        </div>
    </div>
    <!-- å®éªŒå®¤å¡ç‰‡ -->
    <div class="card">
        <div class="card-title">
            <ZZULIFull />
            <strong style="font-size: 1.1rem;">æ ¡å†…ç›¸å…³å®éªŒå®¤</strong>
        </div>
        <div v-for="data in labs" class="card-item">
            <div class="contest-status" style="background-color: currentColor;"></div>
            <div class="contest-info">
                <a class="alink">{{ data.name }}</a>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <CollegeFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">å­¦é™¢ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.college }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <SummaryFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">ç®€ä»‹ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.summary }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <PositionFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">ä½ç½® :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.position }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <TeamFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">æ‹›æ–°èŒƒå›´ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.limit }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <QQFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">æ‹›æ–°ç¾¤èŠ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.group }}</span>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 5px;">
                    <div style="display: flex; flex-shrink: 0; align-items: center; gap: 5px;">
                        <TimeFull />
                        <span style="font-weight: 600; font-size: 0.9rem;">æ‹›æ–°æ—¶é—´ :</span>
                    </div>
                    <span style="font-size: 0.9rem;">{{ data.time }}</span>
                </div>
            </div>
        </div>
    </div>
    <div class="card">
        <!-- å¡ç‰‡æ ‡é¢˜æ  -->
        <div class="card-title">
            <InfoFull />
            <strong style="font-size: 1.1rem;">ç®—æ³•æ¯”èµ›ä¿¡æ¯</strong>
            <div style="position: absolute; right: 0; display: flex; gap: 5px; align-items: center;">
                <CalDavFull />
                <a class="alink" style="font-size: 0.89rem" href="" target="_blank">
                    CalDavè®¢é˜…
                </a>
            </div>
        </div>
        <!-- æ¯”èµ›çŠ¶æ€è¯´æ˜æ  -->
        <div style="display: flex; align-items: center; gap: 20px">
            <!-- Public -->
            <div style="display: flex; align-items: center; gap: 5px">
                <div style="background-color: rgb(73, 185, 255); width: 14px; height: 14px; border-radius: 50px;">
                </div>
                <span style="font-weight: 500; font-size:14px">å·²å‘å¸ƒ</span>
            </div>
            <!-- Register -->
            <div style="display: flex; align-items: center; gap: 5px">
                <div style="background-color: #3bc539; width: 14px; height: 14px; border-radius: 50px;"></div>
                <span style="font-weight: 500; font-size:14px">æŠ¥åä¸­</span>
            </div>
            <!-- Running -->
            <div style="display: flex; align-items: center; gap: 5px">
                <div style="background-color: rgb(255, 234, 47); width: 14px; height: 14px; border-radius: 50px;">
                </div>
                <span style="font-weight: 500; font-size:14px">è¿›è¡Œä¸­</span>
            </div>
        </div>
        <!-- æ¯”èµ›ä¿¡æ¯æ  -->
        <div v-for="data in contests" class="card-item">
            <div class="contest-status" :style="getContestClass(data.status)"></div>
            <div class="contest-info">
                <a class="alink" :href="data.link">{{ data.name }}</a>
                <div style="display: flex; align-items: center; gap: 5px">
                    <TimeFull />
                    <span style="font-weight: 600; font-size: 0.85rem;">{{ data.startAt }}</span>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup>
import { onMounted, ref } from 'vue'
import axios from 'axios'
import NoticeFull from './svg/NoticeFull.vue';
import ZZULIFull from './svg/ZZULIFull.vue';
import CalDavFull from './svg/CalDavFull.vue';
import SummaryFull from './svg/SummaryFull.vue';
import InfoFull from './svg/InfoFull.vue';
import TimeFull from './svg/TimeFull.vue';
import CollegeFull from './svg/CollegeFull.vue';
import PositionFull from './svg/PositionFull.vue';
import TeamFull from './svg/TeamFull.vue';
import QQFull from './svg/QQFull.vue';

const contests = ref([])
const labs = ref([])
const inEvents = ref([])
async function getContests() {
    try {
        const res = await axios.get('https://devapi.frexlink.cn/api/event/get?platform=all')
        res.data.forEach(item => {
            contests.value.push(item)
        })
    }
    catch (e) {
        console.log(e)
    }
}
async function getLabs() {
    try {
        const res = await axios.get('https://devapi.frexlink.cn/api/lab/get?release=true')
        res.data.forEach(item => {
            labs.value.push(item)
        })
    }
    catch (e) {
        console.log(e)
    }
}
async function getInnerEvents() {
    try {
        const res = await axios.get('https://devapi.frexlink.cn/api/event/inner/get?release=true')
        res.data.forEach(item => {
            inEvents.value.push(item)
        })
    }
    catch (e) {
        console.log(e)
    }
}
function getContestClass(status) {
    if (status === 'Register') {
        return 'background-color: #3bc539;'
    }
    else if (status === 'Public') {
        return 'background-color: rgb(73, 185, 255);'
    }
    else {
        return 'background-color: rgb(255, 234, 47);'
    }
}
onMounted(() => {
    getContests()
    getInnerEvents()
    getLabs()
})
</script>

<style scoped>
.alink {
    text-decoration: none;
    font-weight: bold;
    font-size: 1.15rem;
    text-underline-offset: 2px;
    transition: all 0.3s;
}

.alink:hover {
    color: rgb(0, 162, 255);
    text-decoration-line: underline;
}

.main-container {
    margin-bottom: 40px;
    z-index: -1;
    padding: 3px;
    justify-content: center;
    align-items: center;
    border-radius: 10px;
}

.card {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 10px;
    padding: 10px;
    margin: 15px 0;
    border-radius: 5px;
    border: solid 2px var(--vp-c-text-3);
}

.card-main {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: 10px;
    background: var(--vp-c-bg);
    border-radius: 10px;
    padding: 5px;
}

.card-title {
    position: relative;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 10px;
    padding-bottom: 5px;
}

.card-item {
    align-items: center;
    display: flex;
    flex-wrap: wrap;
    padding: 10px;
    transition: all 0.2s;
    border-radius: inherit;
    border: solid 1px var(--vp-c-text-3);
    position: relative;
}

.card-item:hover {
    transform: translate(-1px, -1px);
    box-shadow: 1px 1px 2px var(--vp-c-text-3);
}

.contest-status {
    position: absolute;
    height: 90%;
    width: 6px;
    border-radius: 5px;
}

.contest-ico {
    justify-content: center;
    align-items: center;
    padding: 10px;
    border-radius: 10px;
}

.contest-info {
    flex-wrap: wrap;
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding-left: 15px;
}
</style>